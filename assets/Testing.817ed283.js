import{_,u as d,o as i,c as l,b as a,n as p,t as u,F as g,e as f,d as C,f as y,l as v,r as k,g as E,h as T,i as b,j as w,p as D,k as S}from"./index.0cb360a0.js";import{t as B}from"./data.70d20842.js";const A={name:"APP",props:["pattern","startTime"],data(){return{lastTime:0,backgroundColor:["#FF0017","#0091FF","#E3E3DB","#FF00E3","#00A88A","#52A23B","#B58B00","#91918a"],fontColor:["#E3E3DB","#E3E3DB","#91918a","#E3E3DB","#E3E3DB","#E3E3DB","#E3E3DB","#E3E3DB"],lineHeight:[1.5,2,2.5],textType:[0,1,2],data:[],selectLineHeight:0,selectBackgroundColor:"",selectPattern:{},selectFontColor:"",patternType:[{row:12,number:8,space:1},{row:12,number:29,space:0},{row:12,number:7,space:1},{row:10,number:25,space:0}],selectElementGroup:{},targetElement:""}},methods:{selectElement(t){const n=d();let e=new Date;if(typeof this.selectElementGroup[t]>"u"){this.selectElementGroup[t]=1;let r=this.data[t]==this.targetElement?1:-1;n.eventSeq.push({tag:r,clickTime:e,clickItem:this.data[t],targetItem:this.targetElement,fromStart:e-this.startTime,fromLast:e-this.lastTime}),this.lastTime=e;let s=0,o=0;for(let h in this.selectElementGroup)this.selectElementGroup[h]&&(this.data[h]==this.targetElement?o++:s++);n.tmpAccuracy={wrong:s,right:o,sumWord:this.data.length}}},shuffleArray(t){for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t},dataProcess(t){let n=Math.floor(Math.random()*t.length),e=t[n];t=t.toSpliced(n,1);let r=8;for(let s=0;s<r-1;++s){let o=Math.floor(Math.random()*t.length);t=t.toSpliced(o,1)}t=this.shuffleArray(t);for(let s=0;s<r;++s){let o=Math.floor(Math.random()*(t.length-2*this.selectPattern.number))+this.selectPattern.number;t=t.toSpliced(o,0,e)}return[e,t]}},created(){},mounted(){let t=new Array,n=this.textType[this.pattern.textType];this.selectLineHeight=this.lineHeight[this.pattern.lineHeight],this.selectBackgroundColor=this.backgroundColor[this.pattern.backgroundColor],this.selectFontColor=this.fontColor[this.pattern.backgroundColor],this.lastTime=this.startTime,t=B[n],this.selectPattern=this.patternType[n],[this.targetElement,this.data]=this.dataProcess(t)},watch:{},components:{}},F={style:{width:"100%",height:"100%"}},R={style:{display:"flex","justify-content":"center",height:"100%","padding-top":"calc(0vh)","align-items":"center"}},P=["onClick"],M={key:0};function H(t,n,e,r,s,o){return i(),l("div",F,[a("div",R,[a("div",{style:p({"font-size":"16px",color:s.selectFontColor})},[a("span",null,"TARGET: "+u(s.targetElement),1),a("hr",{style:p({backgroundColor:s.selectFontColor,width:"100%",height:"1px",border:"none",margin:"15px 0px"})},null,4),(i(!0),l(g,null,f(s.selectPattern.row,(h,c)=>(i(),l("div",{key:"row_"+c,style:p({"line-height":s.selectLineHeight})},[(i(!0),l(g,null,f(s.selectPattern.number,(x,m)=>(i(),l("span",{key:"cnt_"+c+"_"+m,style:p({fontWeight:s.selectElementGroup[c*s.selectPattern.number+m]==1?"bolder":"normal",cursor:"pointer"}),onClick:J=>o.selectElement(c*s.selectPattern.number+m)},[C(u(s.data[c*s.selectPattern.number+m]),1),s.selectPattern.space==1?(i(),l("span",M,"\xA0")):y("",!0)],12,P))),128))],4))),128))],4)])])}const I=_(A,[["render",H]]);const j={name:"home_view",data(){return{msgH:null,pattern:[],patternCnt:0,timeCnt:15,timeNote:0,isRelax:!0,timer:null,backgroundColor:["#FF0017","#0091FF","#E3E3DB","#FF00E3","#00A88A","#52A23B","#B58B00","#93908F"],selectBackgroundColor:"#ffffff",startTime:0}},computed:{initSign(){return 1},loadingText(){return"Loading"}},mounted(){const t=d();t.allData.data=[],this.msgH=1,this.pattern=this.patternProcess(),console.log(this.pattern),this.patternCnt=0,this.selectBackgroundColor=this.backgroundColor[this.pattern[this.patternCnt].backgroundColor],this.timeCountDown()},methods:{saveData(){let n=d().allData;v.post("https://formspree.io/f/xqkrgypr",{data:JSON.stringify(n),dataType:"json"}).then(e=>{console.log(e)}).catch(e=>{console.log(e)}),this.$router.push("/end")},shuffleArray(t){for(let n=t.length-1;n>0;n--){const e=Math.floor(Math.random()*(n+1));[t[n],t[e]]=[t[e],t[n]]}return t},patternProcess(){let t=new Array;for(let n=0;n<8;++n)for(let e=0;e<3;++e)for(let r=0;r<3;++r)t.push({backgroundColor:n,lineHeight:e,textType:r});for(let n=0;n<4;++n){let e=Math.floor(Math.random()*72);t.push(t[e])}return this.shuffleArray(t)},roundSave(t){let n=new Date-this.startTime;const e=d();typeof e.tmpAccuracy>"u"&&(e.tmpAccuracy={right:0,wrong:0,sumWord:0}),typeof e.eventSeq>"u"&&(e.eventSeq=[]),e.allData.data.push({id:e.allData.data.length,startTime:this.startTime,time:n,accuracy:e.tmpAccuracy,pattern:t,eventSeq:e.eventSeq}),e.tmpAccuracy={right:0,wrong:0,sumWord:0},e.eventSeq=[],console.log(e.allData)},nextRound(){this.isRelax==!1&&(this.roundSave(this.pattern[this.patternCnt]),this.patternCnt++,this.patternCnt!=76&&(this.isRelax=!this.isRelax),this.patternCnt==76&&this.saveData(),this.timeCountDown())},nextRoundClick(){this.isRelax?(this.isRelax=!this.isRelax,this.skipRelax()):(this.roundSave(this.pattern[this.patternCnt]),this.patternCnt++,this.patternCnt!=76&&(this.isRelax=!this.isRelax),this.patternCnt==76&&this.saveData(),this.timeCountDown()),event.preventDefault()},timeCountDown(){let t=this.timeCnt;this.timeNote=t,this.timer=setInterval(()=>{t>0?(t--,this.timeNote=t):(clearInterval(this.timer),this.startTest())},1e3)},skipRelax(){clearInterval(this.timer),this.startTest()},startTest(){this.isRelax=!1,this.startTime=new Date}},watch:{patternCnt:{handler(){this.patternCnt<this.pattern.length&&(this.selectBackgroundColor=this.backgroundColor[this.pattern[this.patternCnt].backgroundColor])}}},components:{test:I}},N=t=>(D("data-v-c3b754ce"),t=t(),S(),t),q=["element-loading-text"],G={style:{height:"100%",width:"100%"}},L={key:1,style:{width:"100%",height:"100%",display:"flex","justify-content":"center","flex-direction":"column","padding-top":"calc(0vh)"}},z={style:{"margin-bottom":"10px","font-size":"40px",color:"white"}},W={style:{"margin-bottom":"30px","font-size":"20px",color:"white"}},V=N(()=>a("div",{style:{width:"100%",display:"flex","justify-content":"center"}},null,-1));function K(t,n,e,r,s,o){const h=k("test"),c=E("loading");return T((i(),l("div",{class:"common-layout",style:p({width:"100%",height:"100vh",backgroundColor:s.isRelax?" #797775":s.selectBackgroundColor}),"element-loading-text":o.loadingText,"element-loading-background":"rgba(0, 0, 0, 0.8)",onKeyup:n[0]||(n[0]=w(x=>o.nextRound(),["space"])),tabindex:"0"},[a("div",G,[s.isRelax?(i(),l("div",L,[a("div",z,"\u7B2C "+u(s.patternCnt+1)+" \u8F6E",1),a("div",W,"\u4F11\u606F "+u(s.timeNote)+" \u79D2",1),V])):(i(),b(h,{key:0,pattern:s.pattern[s.patternCnt],startTime:s.startTime},null,8,["pattern","startTime"]))])],44,q)),[[c,!o.initSign]])}const U=_(j,[["render",K],["__scopeId","data-v-c3b754ce"]]);export{U as default};
